<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCES Quarterly Education Series Scheduler</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: #2563eb;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6b7280;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .btn-success {
            background: #059669;
        }
        
        .btn-success:hover {
            background: #047857;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2563eb;
        }
        
        .time-slots {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        
        .time-slot {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .time-slot:hover {
            border-color: #2563eb;
            background: #f8fafc;
        }
        
        .time-slot.selected {
            border-color: #2563eb;
            background: #eff6ff;
        }
        
        .time-slot.unavailable {
            background: #f3f4f6;
            color: #6b7280;
            cursor: not-allowed;
            border-color: #d1d5db;
        }
        
        .time-slot.booked {
            background: #fef3c7;
            border-color: #f59e0b;
        }
        
        .speaker-info {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d1fae5;
            border: 1px solid #a7f3d0;
            color: #065f46;
        }
        
        .alert-error {
            background: #fee2e2;
            border: 1px solid #fca5a5;
            color: #991b1b;
        }
        
        .alert-info {
            background: #dbeafe;
            border: 1px solid #93c5fd;
            color: #1e40af;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }
        
        .back-btn {
            margin-bottom: 20px;
        }
        
        .step {
            margin-bottom: 30px;
        }
        
        .step h3 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .admin-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }
        
        .admin-table tr:hover {
            background: #f9fafb;
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #2563eb;
        }
        
        .stat-label {
            color: #6b7280;
            margin-top: 5px;
        }
        
        .password-toggle {
            position: relative;
        }
        
        .password-toggle button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .login-help {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
            color: #0c4a6e;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>MCES Quarterly Education Series Scheduler</h1>
            <p>Register to present at upcoming MCES quarterly education meetings</p>
        </div>
        
        <div class="content">
            <!-- Home Section -->
            <div id="home" class="section active">
                <div class="nav-buttons">
                    <button class="btn" onclick="showSection('register')">Register as Speaker</button>
                    <button class="btn btn-secondary" onclick="showSection('admin-login')">Admin Access</button>
                </div>
                
                <div id="home-info">
                    <div class="alert alert-info">
                        <strong>Welcome to the MCES Quarterly Education Series Scheduler!</strong><br>
                        This system allows medical specialists to register for speaking slots at our quarterly education meetings.
                        Each meeting has three time slots available (09:00-10:00, 10:00-11:00, 11:00-12:00), and the system prevents double-booking automatically.
                        <br><br>
                        <strong>2026 Meeting Schedule:</strong> February, May, August, and November
                    </div>
                </div>
            </div>
            
            <!-- Registration Section -->
            <div id="register" class="section">
                <button class="btn btn-secondary back-btn" onclick="showSection('home')">‚Üê Back to Home</button>
                
                <h2>Speaker Registration</h2>
                <p>Register to present at an upcoming MCES quarterly education meeting</p>
                
                <div id="registration-content">
                    <div class="loading" id="loading">
                        Loading available meetings...
                    </div>
                    
                    <div id="no-meetings" style="display: none;">
                        <div class="alert alert-error">
                            No active quarterly meetings available at this time.
                        </div>
                    </div>
                    
                    <div id="registration-form" style="display: none;">
                        <div class="step">
                            <h3>üìÖ Step 1: Select Quarterly Meeting</h3>
                            <div class="form-group">
                                <label for="quarter-select">Choose which quarterly meeting you'd like to present at:</label>
                                <select id="quarter-select" onchange="loadTimeSlots()">
                                    <option value="">Select a meeting...</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="step" id="time-slot-step" style="display: none;">
                            <h3>üïí Step 2: Select Time Slot</h3>
                            <div id="time-slots-container">
                                <!-- Time slots will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="step" id="speaker-info-step" style="display: none;">
                            <h3>üë§ Step 3: Speaker Information</h3>
                            <form id="speaker-form">
                                <div class="form-group">
                                    <label for="speaker-name">Full Name *</label>
                                    <input type="text" id="speaker-name" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="speaker-email">Email Address *</label>
                                    <input type="email" id="speaker-email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="speaker-phone">Phone Number</label>
                                    <input type="tel" id="speaker-phone">
                                </div>
                                
                                <div class="form-group">
                                    <label for="specialty">Medical Specialty *</label>
                                    <input type="text" id="specialty" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="topic-title">Presentation Topic *</label>
                                    <input type="text" id="topic-title" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="topic-description">Topic Description</label>
                                    <textarea id="topic-description" rows="4" placeholder="Brief description of your presentation topic..."></textarea>
                                </div>
                                
                                <button type="submit" class="btn">Complete Registration</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div id="registration-success" style="display: none;">
                    <div class="alert alert-success">
                        <h3>üéâ Registration Successful!</h3>
                        <p>Thank you for registering to speak at our MCES quarterly education meeting. You will receive a confirmation email shortly with all the details.</p>
                    </div>
                    <button class="btn" onclick="resetRegistration()">Register Another Speaker</button>
                </div>
            </div>
            
            <!-- Admin Login Section -->
            <div id="admin-login" class="section">
                <button class="btn btn-secondary back-btn" onclick="showSection('home')">‚Üê Back to Home</button>
                
                <h2>Admin Login</h2>
                
                <div class="form-group">
                    <label for="admin-username">Username</label>
                    <input type="text" id="admin-username" placeholder="Enter username">
                </div>
                
                <div class="form-group">
                    <label for="admin-password">Password</label>
                    <div class="password-toggle">
                        <input type="password" id="admin-password" placeholder="Enter password">
                        <button type="button" onclick="togglePassword()">Show</button>
                    </div>
                </div>
                
                <button class="btn" onclick="adminLogin()">Sign In</button>
                
                <div class="login-help">
                    <strong>Default Admin Credentials:</strong><br>
                    Username: <code>admin</code><br>
                    Password: <code>admin123</code>
                </div>
                
                <div id="admin-login-error" style="display: none;">
                    <div class="alert alert-error">
                        <strong>Login Failed!</strong><br>
                        <span id="login-error-message">Invalid credentials. Please try again.</span>
                    </div>
                </div>
            </div>
            
            <!-- Admin Dashboard Section -->
            <div id="admin-dashboard" class="section">
                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="showSection('home')">‚Üê Back to Home</button>
                    <button class="btn btn-success" onclick="exportCSV()">üìä Export CSV</button>
                    <button class="btn" onclick="refreshRegistrations()">üîÑ Refresh</button>
                </div>
                
                <h2>Admin Dashboard</h2>
                
                <div class="stats-grid" id="admin-stats">
                    <!-- Stats will be loaded here -->
                </div>
                
                <div class="admin-controls">
                    <select id="quarter-filter" onchange="filterByQuarter()">
                        <option value="">All Quarters</option>
                    </select>
                </div>
                
                <div id="registrations-table-container">
                    <div class="loading">Loading registrations...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedQuarter = null;
        let selectedSlot = null;
        let quarters = [];
        let allRegistrations = [];
        let isAdminLoggedIn = false;
        
        // Toggle password visibility
        function togglePassword() {
            const passwordField = document.getElementById('admin-password');
            const toggleButton = passwordField.nextElementSibling;
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleButton.textContent = 'Hide';
            } else {
                passwordField.type = 'password';
                toggleButton.textContent = 'Show';
            }
        }
        
        // Utility function to format time strings
        function formatTime(timeString) {
            if (!timeString) return '';
            
            if (timeString.includes(':')) {
                const parts = timeString.split(':');
                if (parts.length >= 2) {
                    const hour = parts[0].padStart(2, '0');
                    const minute = parts[1].padStart(2, '0');
                    return `${hour}:${minute}`;
                }
            }
            
            return timeString;
        }
        
        // Show/hide sections
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionName).classList.add('active');
            
            // Clear login form when showing admin login
            if (sectionName === 'admin-login') {
                document.getElementById('admin-username').value = '';
                document.getElementById('admin-password').value = '';
                document.getElementById('admin-login-error').style.display = 'none';
            }
            
            if (sectionName === 'register') {
                loadQuarters();
            } else if (sectionName === 'admin-dashboard' && isAdminLoggedIn) {
                loadAdminDashboard();
            }
        }
        
        // Admin login
        async function adminLogin() {
            const username = document.getElementById('admin-username').value.trim();
            const password = document.getElementById('admin-password').value;
            
            console.log('Attempting login with:', { username, password: password ? '[PROVIDED]' : '[EMPTY]' });
            
            if (!username || !password) {
                document.getElementById('login-error-message').textContent = 'Please enter both username and password.';
                document.getElementById('admin-login-error').style.display = 'block';
                return;
            }
            
            try {
                const response = await fetch('/api/admin/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                console.log('Login response status:', response.status);
                const result = await response.json();
                console.log('Login response:', result);
                
                if (result.success) {
                    isAdminLoggedIn = true;
                    showSection('admin-dashboard');
                } else {
                    document.getElementById('login-error-message').textContent = result.message || 'Invalid credentials. Please try again.';
                    document.getElementById('admin-login-error').style.display = 'block';
                }
                
            } catch (error) {
                console.error('Login error:', error);
                document.getElementById('login-error-message').textContent = 'Login failed. Please check your connection and try again.';
                document.getElementById('admin-login-error').style.display = 'block';
            }
        }
        
        // Load admin dashboard
        async function loadAdminDashboard() {
            try {
                // Load registrations
                const response = await fetch('/api/admin/registrations');
                const data = await response.json();
                allRegistrations = data.registrations || [];
                
                // Load quarters for filter
                await loadQuarters();
                populateQuarterFilter();
                
                // Update stats
                updateAdminStats();
                
                // Display registrations table
                displayRegistrationsTable(allRegistrations);
                
            } catch (error) {
                console.error('Error loading admin dashboard:', error);
                document.getElementById('registrations-table-container').innerHTML = 
                    '<div class="alert alert-error">Error loading registrations.</div>';
            }
        }
        
        // Update admin stats
        function updateAdminStats() {
            const totalRegistrations = allRegistrations.length;
            const uniqueSpeakers = new Set(allRegistrations.map(r => r.speaker_email)).size;
            const quarters = new Set(allRegistrations.map(r => r.quarter_name)).size;
            
            document.getElementById('admin-stats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalRegistrations}</div>
                    <div class="stat-label">Total Registrations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${uniqueSpeakers}</div>
                    <div class="stat-label">Unique Speakers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${quarters}</div>
                    <div class="stat-label">Active Quarters</div>
                </div>
            `;
        }
        
        // Populate quarter filter
        function populateQuarterFilter() {
            const quarterFilter = document.getElementById('quarter-filter');
            quarterFilter.innerHTML = '<option value="">All Quarters</option>';
            
            const uniqueQuarters = [...new Set(allRegistrations.map(r => r.quarter_name))];
            uniqueQuarters.forEach(quarter => {
                const option = document.createElement('option');
                option.value = quarter;
                option.textContent = quarter;
                quarterFilter.appendChild(option);
            });
        }
        
        // Filter registrations by quarter
        function filterByQuarter() {
            const selectedQuarter = document.getElementById('quarter-filter').value;
            
            if (selectedQuarter) {
                const filtered = allRegistrations.filter(r => r.quarter_name === selectedQuarter);
                displayRegistrationsTable(filtered);
            } else {
                displayRegistrationsTable(allRegistrations);
            }
        }
        
        // Display registrations table
        function displayRegistrationsTable(registrations) {
            if (registrations.length === 0) {
                document.getElementById('registrations-table-container').innerHTML = 
                    '<div class="alert alert-info">No registrations found.</div>';
                return;
            }
            
            let tableHTML = `
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Speaker Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Specialty</th>
                            <th>Quarter</th>
                            <th>Meeting Date</th>
                            <th>Time Slot</th>
                            <th>Topic</th>
                            <th>Registered</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            registrations.forEach(reg => {
                const registeredDate = new Date(reg.registered_at).toLocaleDateString();
                tableHTML += `
                    <tr>
                        <td><strong>${reg.speaker_name}</strong></td>
                        <td><a href="mailto:${reg.speaker_email}">${reg.speaker_email}</a></td>
                        <td>${reg.speaker_phone || 'N/A'}</td>
                        <td>${reg.specialty || 'N/A'}</td>
                        <td>${reg.quarter_name}</td>
                        <td>${reg.meeting_date}</td>
                        <td><strong>${reg.time_slot}</strong><br><small>${reg.slot_name}</small></td>
                        <td>
                            <strong>${reg.topic_title}</strong>
                            ${reg.topic_description ? '<br><small>' + reg.topic_description + '</small>' : ''}
                        </td>
                        <td>${registeredDate}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            document.getElementById('registrations-table-container').innerHTML = tableHTML;
        }
        
        // Export CSV
        async function exportCSV() {
            try {
                const response = await fetch('/api/admin/export/csv');
                const data = await response.json();
                
                if (data.csv_data) {
                    // Create and download CSV file
                    const blob = new Blob([data.csv_data], { type: 'text/csv' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = data.filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                }
                
            } catch (error) {
                console.error('Error exporting CSV:', error);
                alert('Error exporting CSV file.');
            }
        }
        
        // Refresh registrations
        function refreshRegistrations() {
            if (isAdminLoggedIn) {
                loadAdminDashboard();
            }
        }
        
        // Load available quarters
        async function loadQuarters() {
            try {
                if (document.getElementById('loading')) {
                    document.getElementById('loading').style.display = 'block';
                }
                if (document.getElementById('no-meetings')) {
                    document.getElementById('no-meetings').style.display = 'none';
                }
                if (document.getElementById('registration-form')) {
                    document.getElementById('registration-form').style.display = 'none';
                }
                
                const endpoints = ['/api/quarters', '/api/quarters/active'];
                let response = null;
                
                for (const endpoint of endpoints) {
                    try {
                        response = await fetch(endpoint);
                        if (response.ok) {
                            quarters = await response.json();
                            if (quarters && quarters.length > 0) {
                                break;
                            }
                        }
                    } catch (e) {
                        continue;
                    }
                }
                
                if (document.getElementById('loading')) {
                    document.getElementById('loading').style.display = 'none';
                }
                
                if (!quarters || quarters.length === 0) {
                    if (document.getElementById('no-meetings')) {
                        document.getElementById('no-meetings').style.display = 'block';
                    }
                    return;
                }
                
                // Populate quarter select if in registration section
                const quarterSelect = document.getElementById('quarter-select');
                if (quarterSelect) {
                    quarterSelect.innerHTML = '<option value="">Select a meeting...</option>';
                    
                    quarters.forEach(quarter => {
                        const option = document.createElement('option');
                        option.value = quarter.id;
                        option.textContent = `${quarter.name} - ${quarter.meeting_date} (${quarter.available_slots} slots available)`;
                        quarterSelect.appendChild(option);
                    });
                    
                    document.getElementById('registration-form').style.display = 'block';
                }
                
            } catch (error) {
                console.error('Error loading quarters:', error);
                if (document.getElementById('loading')) {
                    document.getElementById('loading').style.display = 'none';
                }
                if (document.getElementById('no-meetings')) {
                    document.getElementById('no-meetings').style.display = 'block';
                }
            }
        }
        
        // Load time slots for selected quarter
        async function loadTimeSlots() {
            const quarterSelect = document.getElementById('quarter-select');
            const quarterId = quarterSelect.value;
            
            if (!quarterId) {
                document.getElementById('time-slot-step').style.display = 'none';
                document.getElementById('speaker-info-step').style.display = 'none';
                return;
            }
            
            selectedQuarter = quarters.find(q => q.id == quarterId);
            
            try {
                const response = await fetch(`/api/quarters/${quarterId}/slots`);
                const slots = await response.json();
                
                const container = document.getElementById('time-slots-container');
                container.innerHTML = '';
                
                if (!slots || slots.length === 0) {
                    container.innerHTML = '<div class="alert alert-error">No time slots available for this meeting.</div>';
                    return;
                }
                
                slots.forEach(slot => {
                    const slotDiv = document.createElement('div');
                    let slotClass = 'time-slot';
                    
                    if (!slot.is_available) {
                        slotClass += ' unavailable booked';
                    }
                    
                    slotDiv.className = slotClass;
                    
                    const startTime = formatTime(slot.start_time);
                    const endTime = formatTime(slot.end_time);
                    const timeDisplay = `${startTime} - ${endTime}`;
                    
                    let slotName = slot.slot_name || '';
                    if (slotName.includes('(')) {
                        slotName = slotName.split('(')[0].trim();
                    }
                    
                    let slotContent = `
                        <strong>${timeDisplay}</strong><br>
                        <span>${slotName}</span><br>
                    `;
                    
                    if (slot.is_available) {
                        slotContent += '<small>Available</small>';
                        slotDiv.onclick = () => selectTimeSlot(slot, slotDiv);
                    } else {
                        slotContent += '<small>Already booked</small>';
                        if (slot.speaker_name) {
                            slotContent += `
                                <div class="speaker-info">
                                    <strong>Speaker:</strong> ${slot.speaker_name}<br>
                                    <strong>Topic:</strong> ${slot.topic_title || 'Not specified'}
                                </div>
                            `;
                        }
                    }
                    
                    slotDiv.innerHTML = slotContent;
                    container.appendChild(slotDiv);
                });
                
                document.getElementById('time-slot-step').style.display = 'block';
                
            } catch (error) {
                console.error('Error loading time slots:', error);
                document.getElementById('time-slots-container').innerHTML = 
                    '<div class="alert alert-error">Error loading time slots. Please try again.</div>';
            }
        }
        
        // Select time slot
        function selectTimeSlot(slot, element) {
            document.querySelectorAll('.time-slot').forEach(el => {
                el.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedSlot = slot;
            
            document.getElementById('speaker-info-step').style.display = 'block';
        }
        
        // Handle form submission
        document.getElementById('speaker-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!selectedSlot) {
                alert('Please select a time slot first.');
                return;
            }
            
            const formData = {
                lecture_slot_id: selectedSlot.lecture_slot_id,
                speaker_name: document.getElementById('speaker-name').value,
                speaker_email: document.getElementById('speaker-email').value,
                speaker_phone: document.getElementById('speaker-phone').value,
                specialty: document.getElementById('specialty').value,
                topic_title: document.getElementById('topic-title').value,
                topic_description: document.getElementById('topic-description').value
            };
            
            try {
                const response = await fetch('/api/registrations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    document.getElementById('registration-content').style.display = 'none';
                    document.getElementById('registration-success').style.display = 'block';
                } else {
                    alert(`Registration failed: ${result.message}`);
                }
                
            } catch (error) {
                console.error('Error submitting registration:', error);
                alert('Error submitting registration. Please try again.');
            }
        });
        
        // Reset registration form
        function resetRegistration() {
            document.getElementById('registration-content').style.display = 'block';
            document.getElementById('registration-success').style.display = 'none';
            document.getElementById('speaker-form').reset();
            document.getElementById('quarter-select').value = '';
            document.getElementById('time-slot-step').style.display = 'none';
            document.getElementById('speaker-info-step').style.display = 'none';
            selectedQuarter = null;
            selectedSlot = null;
            loadQuarters();
        }
        
        // Initialize
        console.log('MCES Quarterly Education Series Scheduler initialized');
    </script>
</body>
</html>

